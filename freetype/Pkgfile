# Description: A free and portable TrueType font rendering engine.
# URL:         https://www.freetype.org
# Maintainer:  onodera, https://github.com/onodra-punpun/crux-ports/issues
# Depends on:  zlib libpng

name=freetype
version=2.7.1
release=1
source=(
	https://download.savannah.gnu.org/releases/$name/$name-$version.tar.bz2
	0001-Enable-table-validation-modules.patch
	0002-Enable-subpixel-rendering.patch
	0003-Enable-infinality-subpixel-hinting.patch
)

build() {
	cd $name-$version

	patch -Np1 < $SRC/0001-Enable-table-validation-modules.patch
	patch -Np1 < $SRC/0002-Enable-subpixel-rendering.patch
	patch -Np1 < $SRC/0003-Enable-infinality-subpixel-hinting.patch

	./configure --prefix=/usr \
	            --with-zlib

	make
	make DESTDIR=$PKG install
}
