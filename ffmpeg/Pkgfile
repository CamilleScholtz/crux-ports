# Description: Complete solution to record, convert and stream audio and video.
# URL:         http://ffmpeg.org
# Maintainer:  onodera, https://github.com/onodra-punpun/crux-ports/issues
# Depends on:  gnutls lame libass libbluray libgmp libmodplug libsdl libtheora libva libvpx libxvid opencore-amr openjpeg opus rtmpdump schroedinger speex x264 x265

name=ffmpeg
version=3.0.2
release=1
source=(http://ffmpeg.org/releases/$name-$version.tar.bz2)

build() {
	cd $name-$version

	./configure \
			--prefix=/usr \
			--disable-debug \
			--disable-doc \
			--enable-avfilter \
			--enable-avresample \
			--enable-dxva2 \
			--enable-fontconfig \
			--enable-gnutls \
			--enable-gpl \
			--enable-libass \
			--enable-libbluray \
			--enable-libfreetype \
			--enable-libmodplug \
			--enable-libmp3lame \
			--enable-libopencore_amrnb \
			--enable-libopencore_amrwb \
			--enable-libopenjpeg \
			--enable-libopus \
			--enable-librtmp \
			--enable-libschroedinger \
			--enable-libspeex \
			--enable-libtheora \
			--enable-libvorbis \
			--enable-libx264 \
			--enable-libx265 \
			--enable-libvpx \
			--enable-libxvid \
			--enable-pic \
			--enable-postproc \
			--enable-pthreads \
			--enable-shared \
			--enable-swresample \
			--enable-vaapi \
			--enable-vdpau \
			--enable-version3 \
			--enable-x11grab

	make
	make DESTDIR=$PKG install install-man
}
