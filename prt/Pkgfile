# Description: CRUX port utils written in go.
# URL:         https://github.com/onodera-punpun/prt
# Maintainer:  onodera, https://github.com/onodera-punpun/crux-ports/issues
# Depends on:  go
# Optional:    fish

name=prt
version=git
release=1
source=()

build () {
	export GOPATH=$(pwd)
	go get -d -u -v -fix github.com/onodera-punpun/$name
	cd src/github.com/onodera-punpun/$name

	sed -i 's:/home/onodera/code/go/src/github.com/onodera-punpun/prt/runtime/config.toml:/etc/prt/config.toml:' config/config.go
	go build -v

	install -Dm755 prt $PKG/usr/bin/prt
	install -Dm644 runtime/config.toml $PKG/etc/prt/config.toml
	install -Dm644 runtime/fish/functions/cdp.fish $PKG/usr/share/fish/functions/cdp.fish
}
